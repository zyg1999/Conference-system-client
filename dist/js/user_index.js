/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/user_index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/chart.js":
/*!*********************!*\
  !*** ./js/chart.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var ajax = __webpack_require__(/*! ./public_Ajax.js */ \"./js/public_Ajax.js\").ajax;\r\n\r\nfunction tokenExist(dom, token) {\r\n    if (!token) {\r\n        dom.innerHTML = '非正常登陆';\r\n        dom.style = 'opacity: 1;';\r\n        sessionStorage.clear();\r\n        setTimeout(function() {\r\n            window.location.href = url + 'login.html';\r\n        }, 3000);\r\n        return;\r\n    }\r\n}\r\n\r\nfunction updateToken(msg, fun) {\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.setItem('token', msg);\r\n    fun();\r\n}\r\nlet pageboxwrongtips = document.getElementsByClassName('pageboxwrongtips')[0];\r\nlet bottoms = document.getElementsByClassName('bottombox')[0].children;\r\nbottoms[1].addEventListener('click', function() {\r\n    attendanceDetail();\r\n});\r\n\r\nlet attendanceAll;\r\nlet attendanceCount;\r\nlet attenddetailtextchil = document.getElementsByClassName('statedetails');\r\nlet proportion = document.getElementById('proportion');\r\n//第二大页出勤情况筛选\r\n\r\nfunction attendanceDetail() {\r\n    attendanceCount = [0, 0, 0, 0, 0];\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let ID = sessionStorage.getItem('id');\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getUserMeetings.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { userId: ID, type: 2 },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 100) {\r\n                updateToken(res.msg, getHistoryRecord);\r\n            } else if (res.status == 0) {\r\n                let data = res.data;\r\n                if (data.length == 0) {\r\n                    deilefail(pageboxwrongtips, '暂无记录');\r\n                    return;\r\n                }\r\n                attendanceAll = data.length;\r\n                for (let i = 0; i < data.length; i++) {\r\n                    attendanceCount[data[i].userStatus]++;\r\n                }\r\n                chartP();\r\n                for (let i = 0; i < attenddetailtextchil.length; i++) {\r\n                    attenddetailtextchil[i].setAttribute('data-text', attendanceCount[i + 1] + '次>');\r\n                }\r\n                proportion.innerHTML = attendanceCount[4] + '&nbsp;/&nbsp;' + attendanceAll;\r\n                attendanceDetailFill(data);\r\n            }\r\n        },\r\n        fail: function() {\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\n//环形图\r\nfunction chartP() { \r\n    let width = document.body.clientWidth;\r\n    let mountNode = document.getElementById('mountNode');\r\n    mountNode.style = 'width:' + width + 'px;' + 'height:' + (width / 3 * 2) + 'px';\r\n    var data = [{\r\n        name: '缺勤',\r\n        percent:  parseFloat(((attendanceCount[1] / attendanceAll)* 100).toFixed(2)),\r\n        a: '1'\r\n    }, {\r\n        name: '请假',\r\n        percent:  parseFloat(((attendanceCount[2] / attendanceAll)* 100).toFixed(2)) ,\r\n        a: '1'\r\n    }, {\r\n        name: '迟到',\r\n        percent:  parseFloat(((attendanceCount[3] / attendanceAll)* 100).toFixed(2) ),\r\n        a: '1'\r\n    }, {\r\n        name: '正常',\r\n        percent:  parseFloat(((attendanceCount[4] / attendanceAll)* 100).toFixed(2) ),\r\n        a: '1'\r\n    }];\r\n\r\n    var map = {};\r\n    data.map(function(obj) {\r\n        map[obj.name] = obj.percent + '%';\r\n    });\r\n\r\n    var chart = new F2.Chart({\r\n        id: 'mountNode',\r\n        pixelRatio: window.devicePixelRatio,\r\n        padding: [20, 'auto']\r\n    });\r\n    chart.source(data, {\r\n        percent: {\r\n            formatter: function formatter(val) {\r\n                return val + '%';\r\n            }\r\n        }\r\n    });\r\n    chart.tooltip(false);\r\n    chart.legend({\r\n        position: 'right',\r\n        itemFormatter: function itemFormatter(val) {\r\n            return val + '  ' + map[val];\r\n        }\r\n    });\r\n    chart.coord('polar', {\r\n        transposed: true,\r\n        innerRadius: 0.7,\r\n        radius: 1\r\n    });\r\n    chart.axis(false);\r\n    chart.interval().position('a*percent').color('name', ['#8CEBFF', '#C5FF8C', '#FED28B', '#FFF786']).adjust('stack');\r\n\r\n    chart.guide().html({\r\n        position: ['50%', '55%'],\r\n        html: '<div style=\"width: 250px;height: 40px;text-align: center;\">' + '<div style=\"font-size: 15px\">出勤情况</div>' + '</div>'\r\n    });\r\n    chart.render();\r\n}\r\nlet attendbox = document.getElementsByClassName('attendbox');\r\n\r\nfunction attendanceDetailFill(data) {\r\n    let lackinner = '';\r\n    let askflvinner = '';\r\n    let lateinner = '';\r\n    let normalinner = '';\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        if (data[i].userStatus == 1) {\r\n            lackinner += '<div class=\"absent\"><p class=\"charttittle\">会议名称：' + data[i].meetingName + '</p><p class=\"chartstart\">开始时间：' + data[i].startTime + '</p><p class=\"chartend\">结束时间：' +data[i].endTime + '</p></div>';\r\n        } else if (data[i].userStatus == 2) {\r\n            askflvinner += '<div class=\"askleave\"><p class=\"charttittle\">会议名称：' + data[i].meetingName + '</p><p class=\"chartstart\">开始时间：' + data[i].startTime + '</p><p class=\"chartend\">结束时间：' +data[i].endTime + '</p></div>';\r\n        } else if (data[i].userStatus == 3) {\r\n            lateinner += '<div class=\"lateat\"><p class=\"charttittle\">会议名称：' + data[i].meetingName + '</p><p class=\"chartstart\">开始时间：' + data[i].startTime + '</p><p class=\"chartend\">结束时间：' +data[i].endTime + '</p></div>';\r\n        } else if (data[i].userStatus == 4) {\r\n            normalinner += '<div class=\"normalat\"><p class=\"charttittle\">会议名称：' + data[i].meetingName + '</p><p class=\"chartstart\">开始时间：' + data[i].startTime + '</p><p class=\"chartend\">结束时间：' +data[i].endTime + '</p></div>';\r\n        }\r\n    }\r\n    attendbox[0].innerHTML = lackinner;\r\n    attendbox[1].innerHTML = askflvinner;\r\n    attendbox[2].innerHTML = lateinner;\r\n    attendbox[3].innerHTML = normalinner;\r\n    let anflag = 0;\r\n    for (let i = 0; i < attenddetailtextchil.length; i++) {\r\n        attenddetailtextchil[i].addEventListener('click', function() {\r\n            if (anflag == 0) {\r\n                attendbox[i].style = 'display:block;';\r\n                anflag = 1;\r\n                return;\r\n            }\r\n            attendbox[i].style = 'display:none;';\r\n            anflag = 0;\r\n\r\n        }, false)\r\n    }\r\n}\n\n//# sourceURL=webpack:///./js/chart.js?");

/***/ }),

/***/ "./js/init.js":
/*!********************!*\
  !*** ./js/init.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("(function (doc, win) {\r\n    var docEl = doc.documentElement,\r\n        recalc = function () {\r\n            var clientWidth = docEl.clientWidth;\r\n            if (!clientWidth) return;\r\n            if (clientWidth >= 640) {\r\n                docEl.style.fontSize = '100px';\r\n            } else {\r\n                docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';\r\n            }\r\n        };\r\n    if (!doc.addEventListener) return;\r\n    doc.addEventListener('DOMContentLoaded', recalc, false); \r\n})(document, window);\r\nwindow.addEventListener(\r\n    \"touchmove\",\r\n    function (event) {\r\n      if (event.touches.length > 1) {\r\n        event.preventDefault();\r\n    }\r\n    },\r\n    { passive: false }\r\n  );\r\n  \n\n//# sourceURL=webpack:///./js/init.js?");

/***/ }),

/***/ "./js/public_Ajax.js":
/*!***************************!*\
  !*** ./js/public_Ajax.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/*\r\najax({\r\n    url: \"\", //请求地址\r\n\ttype: 'get',   //请求方式\r\n\tcontenttype:'form','urlencode';\r\n    data: { name: 'zhangsan', age: '23', email: '2372734044@qq.com' }, //请求json参数\r\n    async: false,   //是否异步\r\n    success: function (xhr) {\r\n        //   此处执行请求成功后的代码\r\n    },\r\n    fail: function (err) {\r\n        // 此处为执行成功后的代码 \r\n    }\r\n}); */\r\nexports.ajax = function Ajax(object) {\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.withCredentials = true; //携带cookie\r\n\tvar message = getParmer(object.data);\r\n\txhr.onreadystatechange = function() {\r\n\t\tif (xhr.readyState == 4) {\r\n\t\t\tvar status = xhr.status;\r\n\t\t\tif (status >= 200 && status < 300) {\r\n\t\t\t\tobject.success(xhr);\r\n\t\t\t} else {\r\n\t\t\t\tobject.fail(xhr.status);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tif (object.type == 'get') {\r\n\t\txhr.open(\"get\", object.url + \"?\" + message, object.async);\r\n\t\txhr.send(null);\r\n\t} else if (object.type == 'post') {\r\n\t\txhr.open(\"post\", object.url, object.async);\r\n\t\tif(object.token){\r\n\t\t\tlet token = sessionStorage.getItem('token');\r\n\t\t\txhr.setRequestHeader('token',token);\t\r\n\t\t}\r\n\t\tif(object.contenttype=='form'){\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"multipart/form-data\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t}\r\n\t\txhr.send(message);\r\n\t}\r\n\tfunction getParmer(data) {\r\n\t\tvar arr = [];\r\n\t\tfor (var thing in data) {\r\n\t\t\tarr.push(encodeURIComponent(thing) + '=' + encodeURIComponent(data[thing]));\r\n\t\t}\r\n\t\treturn arr.join('&');\r\n\t}\r\n\t\r\n}\r\n\r\nexports.ajax2=function Ajax2(object){\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.withCredentials = true; //携带cookie\r\n\tvar message = object.data;\r\n\txhr.onreadystatechange = function() {\r\n\t\tif (xhr.readyState == 4) {\r\n\t\t\tvar status = xhr.status;\r\n\t\t\tif (status >= 200 && status < 300) {\r\n\t\t\t\tobject.success(xhr);\r\n\t\t\t} else {\r\n\t\t\t\tobject.fail(xhr.status);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tif (object.type == 'get') {\r\n\t\txhr.open(\"get\", object.url + \"?\" + message, object.async);\r\n\t\txhr.send(null);\r\n\t} else if (object.type == 'post') {\r\n\t\txhr.open(\"post\", object.url, object.async);\r\n\t\tif(object.token){\r\n\t\t\tlet token = sessionStorage.getItem('token');\r\n\t\t\txhr.setRequestHeader('token',token);\t\r\n\t\t}\r\n\t\tif(object.contenttype=='form'){\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"multipart/form-data\");\r\n\t\t}\r\n\t\telse{\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t}\r\n\t\txhr.send(message);\r\n\t}\r\n\t\r\n}\r\n\n\n//# sourceURL=webpack:///./js/public_Ajax.js?");

/***/ }),

/***/ "./js/user_index.js":
/*!**************************!*\
  !*** ./js/user_index.js ***!
  \**************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _style_reset_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/reset.css */ \"./style/reset.css\");\n/* harmony import */ var _style_reset_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_reset_css__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _style_user_index_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../style/user_index.css */ \"./style/user_index.css\");\n/* harmony import */ var _style_user_index_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_user_index_css__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\n\r\n__webpack_require__(/*! ./init.js */ \"./js/init.js\");\r\nwindow.onload = function() {\r\n    __webpack_require__(/*! ./chart.js */ \"./js/chart.js\");\r\n}\r\n\r\nvar ajax = __webpack_require__(/*! ./public_Ajax.js */ \"./js/public_Ajax.js\").ajax;\r\nvar ajax2 = __webpack_require__(/*! ./public_Ajax.js */ \"./js/public_Ajax.js\").ajax2;\r\nlet url = 'http://localhost:8888/'; //'http://192.168.137.1:8888/'\r\nlet sexflag;\r\n//顶部点击切换\r\nlet page1topspan = document.getElementsByClassName('page1top')[0].children;\r\nlet parts = document.getElementsByClassName('partbox')[0].children;\r\nlet modfname = document.getElementsByClassName('modfname')[0];\r\nlet circle = document.getElementsByClassName('circle');\r\nlet modfphone = document.getElementsByClassName('modfphone')[0];\r\nlet emailinput = document.getElementsByClassName('emailinput')[0];\r\nlet page3name = document.getElementById('page3name');\r\nlet page3email = document.getElementsByClassName('page3email')[0];\r\nlet page2name = document.getElementsByClassName('page2name')[0];\r\nlet modfheadpic = document.getElementsByClassName('modfheadpic')[0];\r\nlet page3headpic = document.getElementsByClassName('page3headpic')[0];\r\nlet page2headpic = document.getElementsByClassName('page2headpic')[0];\r\nlet topflag = 1;\r\nfor (let i = 0; i < parts.length; i++) {\r\n    page1topspan[i].addEventListener('click', function() {\r\n        if (i == topflag)\r\n            return;\r\n        else {\r\n            page1topspan[topflag].classList.remove('topselect');\r\n            page1topspan[i].classList.add('topselect');\r\n            parts[topflag].style = 'display:none';\r\n            parts[i].style = 'display:block';\r\n            topflag = i;\r\n        }\r\n    }, false)\r\n}\r\n//bottom部分切换\r\nlet bottoms = document.getElementsByClassName('bottombox')[0].children;\r\nlet pages = document.getElementsByClassName('pagebox')[0].children;\r\nlet bottomflag = 0;\r\nfor (let i = 0; i < bottoms.length; i++) {\r\n    bottoms[i].addEventListener('click', function() {\r\n        if (i == bottomflag) {\r\n            return;\r\n        } else {\r\n            bottoms[bottomflag].style = \"color:#666;\";\r\n            bottoms[bottomflag].children[0].className = 'bottomlogo' + (bottomflag + 1);\r\n            pages[bottomflag].style = 'display:none;';\r\n            bottoms[i].style = \"color:#1EACF6;\";\r\n            bottoms[i].children[0].className = 'bottomlogo' + (i + 1) + 'select';\r\n            pages[i].style = 'display:block;';\r\n            bottomflag = i;\r\n        }\r\n    }, false)\r\n}\r\n\r\n//修改信息\r\nlet infomodifica = document.getElementsByClassName('infomodifica')[0];\r\nlet inputs = infomodifica.getElementsByTagName('input');\r\nlet circles = document.getElementsByClassName('circle');\r\nlet wrongtips = document.getElementsByClassName('wrongtips')[0];\r\n\r\nfor (let i = 0; i < inputs.length; i++) {\r\n    inputs[i].addEventListener('focus', function() {\r\n        wrongtips.innerHTML = '';\r\n    })\r\n}\r\n//先请求当前用户信息\r\nlet selfinfo = {};\r\nselfinfo.sex = 'man';\r\nlet ajaxflag = 1;\r\n\r\nfunction tokenExist(dom, token) {\r\n    if (!token) {\r\n        dom.innerHTML = '非正常登陆';\r\n        dom.style = 'opacity: 1;';\r\n        sessionStorage.clear();\r\n        setTimeout(function() {\r\n            window.location.href = url + 'login.html';\r\n        }, 3000);\r\n        return;\r\n    }\r\n}\r\n\r\nfunction updateToken(msg, fun) {\r\n    sessionStorage.removeItem('token');\r\n    sessionStorage.setItem('token', msg);\r\n    fun();\r\n}\r\n//通信失败\r\nfunction deilefail(dom, info) {\r\n    dom.innerHTML = info;\r\n    dom.style = 'opacity: 1;';\r\n    setTimeout(function() {\r\n        dom.style = 'opacity: 0;';\r\n    }, 3000)\r\n}\r\n//修改个人信息ajax\r\nfunction modifyInformationAjax() {\r\n    let emailstr = inputs[1].value;\r\n    const reg = /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\r\n    if (inputs[0].value.length == 0) {\r\n        wrongtips.innerHTML = '手机号码不能为空';\r\n        return;\r\n    } else if (!reg.test(emailstr)) {\r\n        wrongtips.innerHTML = '邮箱格式有误';\r\n        return;\r\n    } else {\r\n        selfinfo.phone = inputs[0].value;\r\n        selfinfo.email = inputs[1].value;\r\n        if (ajaxflag == 0) {\r\n            wrongtips.innerHTML = '不能多次发送';\r\n            return;\r\n        } else {\r\n            ajaxflag = 0;\r\n            let token = sessionStorage.getItem('token');\r\n            tokenExist(wrongtips, token);\r\n            let id = sessionStorage.getItem('id');\r\n            selfinfo.id = id;\r\n            ajax({\r\n                url: 'http://www.shidongxuan.top/smartMeeting_Web/user/update.do',\r\n                type: 'post',\r\n                data: selfinfo,\r\n                contenttype: 'urlencode',\r\n                async: true,\r\n                token: token,\r\n                success: function(xhr) {\r\n                    ajaxflag = 1;\r\n                    let res = JSON.parse(xhr.responseText);\r\n                    if (res.status == 100) {\r\n                        updateToken(res.msg, modifyInformationAjax);\r\n                    } else if (res.status == 0) {\r\n                        wrongtips.innerHTML = '信息修改成功√';\r\n                        sessionStorage.removeItem('token');\r\n                        sessionStorage.setItem('token', res.msg);\r\n                        sessionStorage.removeItem('phone');\r\n                        sessionStorage.setItem('phone', inputs[0].value);\r\n                        fillInfo();\r\n                    } else {\r\n                        wrongtips.innerHTML = res.msg;\r\n                    }\r\n                },\r\n                fail: function(err) {\r\n                    ajaxflag = 1;\r\n                    deilefail(wrongtips, '通信失败，请重试')\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n//保存信息修改\r\nlet savebtn = document.getElementsByClassName('savemodf')[0];\r\nsavebtn.addEventListener('click', function() {\r\n    modifyInformationAjax();\r\n})\r\n\r\n//信息修改页面跳转\r\nlet moreinfoicon = document.getElementsByClassName('moreinfoicon')[0];\r\nmoreinfoicon.addEventListener('click', function() {\r\n    warp.style = \"display:none;\";\r\n    infomodifica.style = 'display:block;';\r\n});\r\n\r\nlet selfinfomation = document.getElementById('selfinfomation');\r\nselfinfomation.addEventListener('click', function() {\r\n    warp.style = \"display:none;\";\r\n    infomodifica.style = 'display:block;';\r\n})\r\n\r\nlet warp = document.getElementsByClassName('warp')[0];\r\nlet returnlastbtn = document.getElementsByClassName('returnlastpage')[0];\r\nreturnlastbtn.addEventListener('click', function() {\r\n    warp.style = \"display:block;\";\r\n    infomodifica.style = 'display:none;';\r\n});\r\n\r\n//会议室使用频率排序\r\nfunction ConferenceRoomSequencing(data) {\r\n    function comper(a, b) {\r\n        return b.meetingLists.length - a.meetingLists.length;\r\n    }\r\n    data.sort(comper);\r\n}\r\n\r\nlet pageboxwrongtips = document.getElementsByClassName('pageboxwrongtips')[0];\r\n//获取会议室信息\r\nlet meetingroomtop = document.getElementsByClassName('meetingroomtop')[0];\r\nmeetingroomtop.addEventListener('click', function() {\r\n    getAllMeetingRomInfo();\r\n    reservation();\r\n});\r\ngetAllMeetingRomInfo();\r\n\r\nfunction getAllMeetingRomInfo() {\r\n    if (ajaxflag == 0) {\r\n        /* deilefail('不能多次发送'); */\r\n        return;\r\n    }\r\n    ajaxflag = 0;\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/room/getAllRooms.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        token: token,\r\n        success: function(xhr) {\r\n            ajaxflag = 1;\r\n            let res = JSON.parse(xhr.responseText);\r\n            let status = ['', '空闲', '占用', '维护'];\r\n            let color = ['', '#669900', '#FFD38D', '#CDCDCD'];\r\n            if (res.status == 100) {\r\n                updateToken(res.msg, getAllMeetingRomInfo);\r\n            } else if (res.status == 0) {\r\n                let data = res.data;\r\n                ConferenceRoomSequencing(data);\r\n                let part2innerH = '';\r\n                for (let i = 0; i < data.length; i++) {\r\n                    part2innerH += '<div class=\"item\" id=' + data[i].id + '><h2>' + data[i].roomNumber + '</p><div class=\"mtroomstatus\" style=\"background-color:' + color[res.data[i].status] + ';\">' +\r\n                        status[res.data[i].status] + '</div><div class=\"details\"><span class=\"hot pic2\">使用排名第' + (i + 1) +\r\n                        '名</span></div><div class=\"details\"></div>' +\r\n                        '<div class=\"details\"><span class=\"accommodate pic2\">可容纳' + data[i].content + '人</span></div><div class=\"reservationbtn\" nonce=\"' + res.data[i].status + '\"id=' + res.data[i].status + ' style=\"background-color:' + color[res.data[i].status] + ';\">' + '预</div></div>';\r\n                }\r\n                parts[1].innerHTML = part2innerH;\r\n                reservation();\r\n            }\r\n        },\r\n        fail: function() {\r\n            ajaxflag = 1;\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\n\r\n//会议室预定\r\nlet add = document.getElementsByClassName('add')[0];\r\nlet reservationbox = document.getElementsByClassName('reservationbox')[0];\r\nlet partbox = document.getElementsByClassName('partbox')[0];\r\nlet reservationbigbox = document.getElementsByClassName('reservationbigbox')[0];\r\nlet usertips = document.getElementsByClassName('usertips')[0];\r\nlet determine = document.getElementsByClassName('determine')[0];\r\n//加号\r\nadd.onclick = function() {\r\n        reservationbox.style = 'display:block;';\r\n        partbox.addEventListener('click', function() {\r\n            reservationbox.style = 'display:none;';\r\n        }, { once: true });\r\n    }\r\n    //预定页面\r\nvar meetingroomid;\r\n\r\nfunction reservation() {\r\n    let part2Items = document.getElementsByClassName('part2')[0].getElementsByClassName('item');\r\n    let reservationbtns = document.getElementsByClassName('reservationbtn');\r\n    for (let i = 0; i < reservationbtns.length; i++) {\r\n        reservationbtns[i].addEventListener('click', function() {\r\n            let okid = reservationbtns[i].getAttribute(\"id\");\r\n            if (okid== 1||okid == 2) {\r\n                reservationbigbox.style = 'display:block;';\r\n                meetingroomid = part2Items[i].getAttribute(\"id\");\r\n                determine.addEventListener('click', function() {\r\n                    scheduledMeeting();\r\n                });\r\n            } else {\r\n                deilefail(pageboxwrongtips, '不能预订该会议室');\r\n                return;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nlet fork = document.getElementsByClassName('fork')[0];\r\nlet scheduledInputs = reservationbigbox.getElementsByTagName('input');\r\nfork.addEventListener('click', function() {\r\n    reservationbigbox.style = 'display:none;';\r\n    for (let i = 0; i < scheduledInputs.length; i++)\r\n        scheduledInputs[i].value = '';\r\n\r\n});\r\n\r\nfunction scheduledMeeting() {\r\n    if (ajaxflag == 0) {\r\n        deilefail(wrongtips, '不能多次发送');\r\n        return;\r\n    }\r\n    ajaxflag = 0;\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let ID = sessionStorage.getItem('id');\r\n    let meetinginfo = {};\r\n    meetinginfo.roomId = meetingroomid;\r\n    meetinginfo.meetingName = scheduledInputs[0].value;\r\n    meetinginfo.meetingIntro = scheduledInputs[1].value;\r\n    meetinginfo.masterId = ID;\r\n    meetinginfo.startTime = scheduledInputs[2].value.replace(/-/g, '/');\r\n    meetinginfo.endTime = scheduledInputs[3].value.replace(/-/g, '/');\r\n    if (meetinginfo.startTime >= meetinginfo.endTime) {\r\n        deilefail(usertips, '时间格式不正确');\r\n        return;\r\n    }\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/whetherBook.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { roomId: meetinginfo.roomId, startTime: meetinginfo.startTime, endTime: meetinginfo.endTime },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            ajaxflag = 1;\r\n            if (res.status == 100) {\r\n                updateToken(res.msg, scheduledMeeting);\r\n            } else if (res.status == 0) {\r\n                scheduled();\r\n            } else {\r\n                deilefail(usertips, res.msg);\r\n            }\r\n        }\r\n    });\r\n\r\n    function scheduled() {\r\n        ajax({\r\n            url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/bookMeeting.do',\r\n            type: 'post',\r\n            contenttype: 'urlencode',\r\n            async: true,\r\n            data: meetinginfo,\r\n            token: token,\r\n            success: function(xhr) {\r\n                let res = JSON.parse(xhr.responseText);\r\n                ajaxflag = 1;\r\n                if (res.status == 100) {\r\n                    updateToken(res.msg, scheduled);\r\n                } else if (res.status == 0) {\r\n                    deilefail(usertips, '预订成功√');\r\n                } else {\r\n                    deilefail(usertips, '预订失败×');\r\n                }\r\n            },\r\n            fail: function() {\r\n                deilefail(usertips, '通信失败');\r\n            }\r\n        })\r\n    }\r\n}\r\n//获取我正在进行或还未进行的会议\r\nfunction getMyMeetingNow() {\r\n    if (ajaxflag == 0) {\r\n        /* deilefail(pageboxwrongtips, '不能多次发送'); */\r\n        return;\r\n    }\r\n    ajaxflag = 0;\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let ID = sessionStorage.getItem('id');\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getUserMeetings.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { userId: ID, type: 1 },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            ajaxflag = 1;\r\n            if (res.status == 100) {\r\n                updateToken(res.msg, getMyMeetingNow);\r\n            } else if (res.status == 0) {\r\n                let data = res.data;\r\n                if (data.length == 0) {\r\n                    deilefail(pageboxwrongtips, '暂无记录');\r\n                    return;\r\n                }\r\n                let part1IneerH = '';\r\n                let status = ['', '结束', '正在进行', '暂未开始'];\r\n                let color = ['', '#e80a0a', '#04C756', '#EBA704'];\r\n                for (let i = 0; i < data.length; i++) {\r\n                    part1IneerH += '<div class=\"item\" nonce=' + data[i].meetingId + '><span class=\"meetingtittle\">' + data[i].meetingName + '</span><span class=\"meetingstatus\" style=\"background-color:' + color[res.data[i].status] + '\";>' + status[data[i].status] + '</span>' +\r\n                        '<div class=\"more\"></div><div class=\"details\"><span class=\"people pic1\">' + data[i].peopleNum + '人</span><span class=\"myself pic1\">' + data[i].masterName + '</span></div>' +\r\n                        '<div class=\"details\"><span class=\"adress pic1\">' + data[i].roomName + '</span><span class=\"meettime pic1\">' + countTime(data[i].endTime, data[i].startTime) + '分钟</span></div><div class=\"details\">' +\r\n                        '<span class=\"sumtime pic1\">' + data[i].startTime + '-' + data[i].endTime + '</span></div></div>'\r\n                }\r\n                parts[0].innerHTML = part1IneerH;\r\n                willMeeting();\r\n            }\r\n        },\r\n        fail: function() {\r\n            ajaxflag = 1\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\n\r\nfunction countTime(endTime, startTime) {\r\n    return Number.parseInt((new Date(endTime) - new Date(startTime)) / 1000 / 60);\r\n}\r\nlet mymeetingtop = document.getElementsByClassName('mymeetingtop')[0];\r\nmymeetingtop.addEventListener('click', function() {\r\n    getMyMeetingNow();\r\n})\r\nconst attendance = ['', '正常','缺勤', '迟到','请假'];\r\n//获取会议历史\r\nfunction getHistoryRecord() {\r\n    if (ajaxflag == 0) {\r\n        return;\r\n    }\r\n    ajaxflag = 0;\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let ID = sessionStorage.getItem('id');\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getUserMeetings.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { userId: ID, type: 2 },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            ajaxflag = 1;\r\n            if (res.status == 100) {\r\n                updateToken(res.msg, getHistoryRecord);\r\n            } else if (res.status == 0) {\r\n                let data = res.data;\r\n                if (data .length == 0) {\r\n                    deilefail(pageboxwrongtips, '暂无记录');\r\n                    return;\r\n                }\r\n                let part3IneerH = '';\r\n                let part3role = ['', '组织者', '参与者'];\r\n                let color = ['', '#EBA704', '#04C756'];\r\n                let rolestatus;\r\n                for (let i = 0; i < data.length; i++) {\r\n                    rolestatus = 2;\r\n                    if (ID == data[i].masterId)\r\n                        rolestatus = 1;\r\n                    part3IneerH += '<div class=\"item\" nonce=' + data[i].meetingId + '><span style=\"display:line-block; font-size:0.28rem;\">' + data[i].meetingName + '</span><span class=\"mtrole\" style=\"background-color:' + color[rolestatus] + '\">' + part3role[rolestatus] + '</span>' +\r\n                        '<div class=\"details\"><span class=\"people pic3\">' + data[i].peopleNum + '人</span><span class=\"take pic3\">' + attendance[data[i].userStatus] + '</span></div><div class=\"details\">' +\r\n                        '<span class=\"adress pic3\">' + data[i].roomName + '</span><span class=\"meettime pic3\">' + countTime(data[i].endTime, data[i].startTime) + '分钟</span></div><div class=\"details\">' +\r\n                        '<span class=\"myself pic3\">' + data[i].masterName + '</span><span class=\"today pic3\">' + data[i].endTime.substr(0, 10) + '</span></div><div class=\"details\">' +\r\n                        '<span class=\"sumtime pic3\">' + data[i].startTime + '-' + data[i].endTime + '</span></div><div class=\"details\"><span class=\"summary pic3\">' + data[i].meetingIntro + '</span></div></div>'\r\n                }\r\n                parts[2].innerHTML = part3IneerH;\r\n                hisotyMeetDetils();\r\n            }\r\n        },\r\n        fail: function() {\r\n            ajaxflag = 1\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\nconst historytop = document.getElementsByClassName('historytop')[0];\r\nhistorytop.addEventListener('click', function() {\r\n    getHistoryRecord();\r\n})\r\nlet userInfo = {};\r\n//根据手机号获取用户信息\r\nfunction getSelfInfoByphoneNum() {\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let phone = sessionStorage.getItem('phone');\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/user/getOneByPhone.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { phone: phone },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            \r\n            if (res.status == 0) {\r\n                userInfo = res.data;\r\n                fillInfo();\r\n            } else if (res.status == 100) {\r\n                updateToken(res.msg, getSelfInfoByphoneNum);\r\n            }\r\n        },\r\n        fail: function() {\r\n            \r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\ngetSelfInfoByphoneNum();\r\n//第二页信息获取\r\nlet year = document.getElementsByClassName('year')[0];\r\nyear.innerHTML = new Date().getFullYear() + '年';\r\n//填入个人信息\r\nfunction fillInfo() {\r\n    modfname.innerHTML = userInfo.username;\r\n    page2name.innerHTML = userInfo.username;\r\n    page3name.innerHTML = userInfo.username;\r\n\r\n    page3email.innerHTML = '邮箱：' + userInfo.email;\r\n    emailinput.value = userInfo.email;\r\n    modfphone.value = userInfo.phone;\r\n    modfheadpic.style = page3headpic.style = page2headpic.style = 'background-image:url(' + userInfo.avatarUrl + ')';\r\n    if (userInfo.sex == 'man') {\r\n        circle[0].getElementsByTagName('span')[0].className = 'circleselect';\r\n        sexflag = 0;\r\n    } else {\r\n        circle[1].getElementsByTagName('span')[0].className = 'circleselect';\r\n        sexflag = 1;\r\n    }\r\n}\r\n\r\n//性别选择按钮切换\r\nfor (let i = 0; i < circles.length; i++) {\r\n    circles[i].addEventListener('click', function() {\r\n        if (sexflag == i)\r\n            return;\r\n        circles[sexflag].children[0].className = '';\r\n        circles[i].children[0].className = 'circleselect';\r\n        sexflag = i;\r\n        if (i == 0) {\r\n            selfinfo.sex = 'man';\r\n        } else if (i == 1) {\r\n            selfinfo.sex = 'woman';\r\n        }\r\n    })\r\n}\r\nbottoms[0].addEventListener('click', function() {\r\n    getAllMeetingRomInfo();\r\n    reservation();\r\n});\r\nlet meetingstarttime = document.getElementsByClassName('meetingstarttime')[0];\r\nlet meetingendtime = document.getElementsByClassName('meetingendtime')[0];\r\nlet meetingadress = document.getElementsByClassName('meetingadress')[0];\r\nlet introductioncontext = document.getElementsByClassName('introductioncontext')[0];\r\nlet peoplelist = document.getElementsByClassName('peoplelist')[0];\r\nlet meetingdetilname = document.getElementsByClassName('meetingdetilname')[0];\r\nlet attendancepeosum = document.getElementsByClassName('attendancepeosum')[0];\r\n\r\n//会议详细信息\r\nlet metdetilsreturn = document.getElementsByClassName('metdetilsreturn')[0];\r\nlet meetingdetailspage = document.getElementsByClassName('meetingdetailspage')[0];\r\nmetdetilsreturn.addEventListener('click', function() {\r\n    meetingdetailspage.style = 'display:none';\r\n});\r\n\r\nlet meetingId;\r\nlet meetingPeoplealr;\r\nlet masterID;\r\n//即将开的会议的详细信息\r\nfunction willMeeting() {\r\n    let part1Items = document.getElementsByClassName('part1')[0].children;\r\n    let meetingdetailspage = document.getElementsByClassName('meetingdetailspage')[0];\r\n    let meetingdetails;\r\n    for (let i = 0; i < part1Items.length; i++) {\r\n        part1Items[i].addEventListener('click', function() {\r\n            meetingPeoplealr=[];\r\n            peoplelist.innerHTML = '';\r\n            meetingdetailspage.style = 'display:block';\r\n            meetingId = part1Items[i].nonce;\r\n            let token = sessionStorage.getItem('token');\r\n            tokenExist(pageboxwrongtips, token);\r\n            ajax({\r\n                url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getMeetingById.do',\r\n                type: 'post',\r\n                contenttype: 'urlencode',\r\n                async: true,\r\n                data: { meetingId: meetingId },\r\n                token: token,\r\n                success: function(xhr) {\r\n                    let res = JSON.parse(xhr.responseText);\r\n                    if (res.status == 0) {\r\n                        meetingdetails = res.data;\r\n                        meetingdetailspage.id=meetingId;\r\n                        meetingdetilname.innerHTML = meetingdetails.meetingName;\r\n                        attendancepeosum.innerHTML = meetingdetails.memberStatus.length + '人';\r\n                        meetingstarttime.innerHTML = '开始时间：' + meetingdetails.startTime;\r\n                        meetingendtime.innerHTML = '结束时间：' + meetingdetails.endTime;\r\n                        meetingadress.innerHTML = '会议地点：' + meetingdetails.roomName;\r\n                        introductioncontext.innerHTML = meetingdetails.meetingIntro;\r\n                        masterID=meetingdetails.masterId;\r\n                        peoplelist.innerHTML = '<p> ' + meetingdetails.masterName + '&nbsp;&nbsp;(组织者)</p> <span class=\"peoplestatus\"></span>';\r\n                        for (let i = 0; i < meetingdetails.memberStatus.length; i++) {\r\n                            if (meetingdetails.masterId != meetingdetails.memberStatus[i].userId)  \r\n                               peoplelist.innerHTML += '<p> ' + meetingdetails.memberStatus[i].username + '</p>';\r\n                            let {userId:userId,username:username}=meetingdetails.memberStatus[i];\r\n                            let obj={\r\n                                userId:userId,\r\n                                username:username\r\n                            }\r\n                            meetingPeoplealr.push(obj);\r\n                            lookAllPeopleStatus(meetingId);\r\n                        }\r\n                    } else if (res.status == 100) {\r\n                        updateToken(res.msg, willMeeting);\r\n                    }\r\n                },\r\n                fail: function() {\r\n                    deilefail(pageboxwrongtips, '通信失败');\r\n                }\r\n            });\r\n        })\r\n    }\r\n}\r\n\r\nfunction updatePeopleList(){\r\n    let id = document.getElementsByClassName('meetingdetailspage')[0].id;\r\n    let meetingdetails;\r\n    meetingPeoplealr=[];\r\n    peoplelist.innerHTML = '';\r\n    meetingdetailspage.style = 'display:block';\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getMeetingById.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { meetingId:  id},\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 0) {\r\n                meetingdetails = res.data;\r\n                meetingdetilname.innerHTML = meetingdetails.meetingName;\r\n                attendancepeosum.innerHTML = meetingdetails.memberStatus.length + '人';\r\n                meetingstarttime.innerHTML = '开始时间：' + meetingdetails.startTime;\r\n                meetingendtime.innerHTML = '结束时间：' + meetingdetails.endTime;\r\n                meetingadress.innerHTML = '会议地点：' + meetingdetails.roomName;\r\n                introductioncontext.innerHTML = meetingdetails.meetingIntro;\r\n                masterID=meetingdetails.masterId;\r\n                peoplelist.innerHTML = '<p> ' + meetingdetails.masterName + '&nbsp;&nbsp;(组织者)</p><span class=\"peoplestatus\"></span>';\r\n                for (let i = 0; i < meetingdetails.memberStatus.length; i++) {\r\n                    if (meetingdetails.masterId != meetingdetails.memberStatus[i].userId)  \r\n                       peoplelist.innerHTML += '<p> ' + meetingdetails.memberStatus[i].username + '</p>';\r\n                    let {userId:userId,username:username}=meetingdetails.memberStatus[i];\r\n                    let obj={\r\n                        userId:userId,\r\n                        username:username\r\n                    }\r\n                    meetingPeoplealr.push(obj);\r\n                }\r\n                lookAllPeopleStatus(id);\r\n            } else if (res.status == 100) {\r\n                updateToken(res.msg, willMeeting);\r\n            }\r\n        },\r\n        fail: function() {\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    });\r\n}\r\n\r\nlet peopleSelectList = document.getElementsByClassName('peopleSelectList')[0];\r\nlet allPeople;\r\n//请求所有人\r\nfunction getAllPeople(){\r\n    allPeople=new Map();\r\n    let token = sessionStorage.getItem('token');\r\n            tokenExist(pageboxwrongtips, token);\r\n            ajax({\r\n                url: \"http://www.shidongxuan.top/smartMeeting_Web/user/getAll.do\", \r\n                type: 'post',   \r\n                contenttype:'urlencode',\r\n                token:token,\r\n                data: null, \r\n                async: true,   //是否异步\r\n                success: function (xhr) {\r\n                    let res = JSON.parse(xhr.responseText);\r\n                    if (res.status == 0) {\r\n                        for(let i=0;i<res.data.length;i++){\r\n                            let {id:id,username:username}=res.data[i];\r\n                            let obj={\r\n                                id:id,\r\n                                username:username,\r\n                                add:false\r\n                            }\r\n                            allPeople.set(id,obj);\r\n                            \r\n                        }  \r\n                        for(let i=0;i<meetingPeoplealr.length;i++){ \r\n                            allPeople.get(meetingPeoplealr[i].userId).add=true;\r\n                        }\r\n                        let peopleSelectListinner='';\r\n                        for (let key of allPeople.keys()) {\r\n                            if(allPeople.get(key).add===false){\r\n                                peopleSelectListinner+='<label class=\"onepeople\"><p class=\"peopleName\">'+allPeople.get(key).username+'</p><input nonce=\"'+allPeople.get(key).id+'\" type=\"checkbox\" class=\"checkbox\"></label>'\r\n                            }else{\r\n                                peopleSelectListinner+='<label class=\"onepeople\"><p class=\"peopleName\">'+allPeople.get(key).username+'</p><input nonce=\"'+allPeople.get(key).id+'\" type=\"checkbox\" class=\"checkbox\" disabled=\"false\" checked=\"true\"></label>'\r\n                            }\r\n                        }\r\n                        peopleSelectList.innerHTML=peopleSelectListinner;\r\n\r\n                    }else if (res.status == 100) {\r\n                        updateToken(res.msg, willMeeting);\r\n                    }\r\n                },\r\n                fail: function (err) {\r\n                    deilefail(pageboxwrongtips, '通信失败');\r\n                }\r\n            })\r\n}\r\n//添加会议成员\r\nlet addPeoplbox = document.getElementsByClassName('addPeoplbox')[0];\r\nlet addpeople = document.getElementsByClassName('addpeople')[0]; //添加成员按钮\r\naddpeople.addEventListener('click', function() {\r\n    if(userInfo.id==masterID){\r\n        addPeoplbox.style='display:flex;';\r\n        getAllPeople();\r\n    }else{\r\n        deilefail(pageboxwrongtips, '非组织者无权限');\r\n        return;\r\n    }\r\n})\r\nlet selectOk = document.getElementsByClassName('selectOk')[0];\r\nselectOk.addEventListener('click',function(){\r\n    addPeopleToMeet(meetingId);\r\n})\r\n//提交选择人员\r\nfunction addPeopleToMeet(meetingId){\r\n    let peopleAdd;\r\n    let idsList=[];\r\n    let checkboxs = document.getElementsByClassName('checkbox');\r\n    let count=0;\r\n    for(let i=0;i<checkboxs.length;i++){\r\n        if(checkboxs[i].checked&&!checkboxs[i].disabled){\r\n            if(count==0){\r\n                peopleAdd='userIds='+checkboxs[i].nonce;\r\n                idsList.push(checkboxs[i].nonce);\r\n                count=1;\r\n                continue;\r\n            }\r\n            peopleAdd+=','+checkboxs[i].nonce;\r\n            idsList.push(checkboxs[i].nonce);\r\n        }\r\n        \r\n    }\r\n    peopleAdd+='&meetingId='+meetingId;\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    //发送与会人员\r\n    ajax2({\r\n        url: \"http://www.shidongxuan.top/smartMeeting_Web/meeting/inviteMembers.do\", \r\n        type: 'post',   //请求方式\r\n        contenttype:'urlencode',\r\n        token:token,\r\n        data:peopleAdd , //请求json参数\r\n        async: true,   //是否异步\r\n        success: function (xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 0) {\r\n                deilefail(pageboxwrongtips, '添加成功');\r\n            }\r\n            addPeoplbox.style='display:none;';\r\n\r\n            //添map\r\n            for(let i=0;i<idsList.length;i++){\r\n                allPeople.get(Number.parseInt(idsList[i])).add=true;\r\n            }\r\n            //刷新列表\r\n            updatePeopleList();\r\n        },\r\n        fail: function (err) {\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\n//添加与会人员返回健\r\nlet fork2 = document.getElementsByClassName('fork2')[0];\r\nfork2.addEventListener('click',function(){\r\n    addPeoplbox.style='display:none;';\r\n});\r\n\r\n//开始会议\r\nlet startandEnd = document.getElementsByClassName('startandEnd')[0];\r\nlet startEndFlag = 0;\r\nstartandEnd.onclick=function(){\r\n    if(startEndFlag==0){\r\n        //开始会议\r\n        startandEnd.style='background-image:url(../pic/icon_meeting_ending.png);';\r\n        \r\n        startEndMeeting(startEndFlag);\r\n        startEndFlag=1;\r\n\r\n    }else if(startEndFlag==1){\r\n        startandEnd.style='background-image:url(../pic/icon_meeting_start.png);';\r\n        startEndMeeting(startEndFlag);\r\n        startEndFlag=0;\r\n    }\r\n}\r\nfunction startEndMeeting(flag){\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    let id = document.getElementsByClassName('meetingdetailspage')[0].id;\r\n   let  thisreq=flag?'endMeeting':'startMeeting';\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting//'+thisreq+'.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { meetingId:id },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 0) {\r\n                deilefail(pageboxwrongtips, res.msg);\r\n            } else if (res.status == 100) {\r\n                updateToken(res.msg, getSelfInfoByphoneNum);\r\n            } \r\n            else if(res.status==1){\r\n                deilefail(pageboxwrongtips, res.msg);\r\n            }\r\n        },\r\n        fail: function() {\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\r\nlet lookpeoplestatus = document.getElementsByClassName('lookpeoplestatus')[0];\r\n//查看会议人员状态\r\nlet statusList = document.getElementsByClassName('statusList')[0];\r\nfunction lookAllPeopleStatus(id){\r\n    let peoplestatus = document.getElementsByClassName('peoplestatus')[0];\r\n    \r\n    \r\n    peoplestatus.addEventListener('click',function(){\r\n        lookpeoplestatus.style='display:flex';\r\n        let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getMeetingById.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { meetingId:id },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 0) {\r\n                let color=['','#9df0c0','#eea3a3', '#f4dca1','#faebd7'];\r\n                let statusListinner='';\r\n                for(let i=0;i<res.data.memberStatus.length;i++){\r\n                    statusListinner+='<div class=\"onestatus\"><span class=\"statuspic\" style=\" background-image:url('+res.data.memberStatus[i].avatarUrl+')\"></span>'+\r\n                    '<p class=\"statusname\">'+res.data.memberStatus[i].username+'</p><span class=\"statusInner\" style=\"background-color:'+color[res.data.memberStatus[i].userStatus]+'\">'+attendance[res.data.memberStatus[i].userStatus]+'</span></div>';\r\n                }\r\n                statusList.innerHTML=statusListinner;\r\n            }\r\n        },\r\n        fail:function(){\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n    });\r\n}\r\n\r\n\r\nlet fork3 = document.getElementsByClassName('fork3')[0];\r\nfork3.addEventListener('click',function(){\r\n    lookpeoplestatus.style='display:none';\r\n})\r\n//历史会议详情\r\nfunction hisotyMeetDetils(){\r\n    let part3Items = parts[2].getElementsByClassName('item');\r\n    let hismetdetilsreturn = document.getElementsByClassName('hismetdetilsreturn')[0];\r\n    let historymeetingbox = document.getElementsByClassName('historymeetingbox')[0];\r\n    hismetdetilsreturn.addEventListener('click',function(){\r\n        historymeetingbox.style='display:none';\r\n    });\r\n    for(let i=0;i<part3Items.length;i++){\r\n        part3Items[i].addEventListener('click',function(){\r\n            //获取历史会议详情\r\n            let id = part3Items[i].nonce;\r\n            getHistoryDetails(id);\r\n            historymeetingbox.style='display:block';\r\n        })\r\n    }\r\n}\r\n\r\nfunction getHistoryDetails(id){\r\n    let token = sessionStorage.getItem('token');\r\n    tokenExist(pageboxwrongtips, token);\r\n    ajax({\r\n        url: 'http://www.shidongxuan.top/smartMeeting_Web/meeting/getMeetingById.do',\r\n        type: 'post',\r\n        contenttype: 'urlencode',\r\n        async: true,\r\n        data: { meetingId:id },\r\n        token: token,\r\n        success: function(xhr) {\r\n            let res = JSON.parse(xhr.responseText);\r\n            if (res.status == 0) {\r\n                let color=['','#04C756','#e80a0a', '#EBA704','#04d4eb'];\r\n                let hispeodeatilsinner='';\r\n                for(let i=0;i<res.data.memberStatus.length;i++){\r\n                    hispeodeatilsinner+='<div class=\"onepeople\"><span class=\"hisheadpic\" style=\"background-image: url('+res.data.memberStatus[i].avatarUrl+');\";></span>'+\r\n                    '<p class=\"hispeople\" >'+res.data.memberStatus[i].username+'</p><span class=\"hisstatus\" style=\"background-color:'+color[res.data.memberStatus[i].userStatus]+'\">'+attendance[res.data.memberStatus[i].userStatus]+'</span></div>'\r\n                }\r\n                let hispeoplelis=document.getElementsByClassName('hispeoplelist')[0];\r\n                hispeoplelis.innerHTML=hispeodeatilsinner;\r\n            } else if (res.status == 100) {\r\n                updateToken(res.msg, getSelfInfoByphoneNum);\r\n            } \r\n            \r\n        },\r\n        fail: function() {\r\n            deilefail(pageboxwrongtips, '通信失败');\r\n        }\r\n    })\r\n}\n\n//# sourceURL=webpack:///./js/user_index.js?");

/***/ }),

/***/ "./style/reset.css":
/*!*************************!*\
  !*** ./style/reset.css ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=webpack:///./style/reset.css?");

/***/ }),

/***/ "./style/user_index.css":
/*!******************************!*\
  !*** ./style/user_index.css ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin\n\n//# sourceURL=webpack:///./style/user_index.css?");

/***/ })

/******/ });